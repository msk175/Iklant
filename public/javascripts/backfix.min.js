/*!
 * Back Button Detection Object V 1.0.1
 * http://www.brookebryan.com/
 *
 * Copyright 2010, Brooke Bryan
 *
 * Date: Thu 27 Jan 2011 13:37 GMT
 */

var backdetect={Version:'1.0.0',Description:'Back Button Detection',Browser:{IE:!!(window.attachEvent&&!window.opera),Safari:navigator.userAgent.indexOf('Apple')>-1,Opera:!!window.opera},FrameLoaded:0,FrameTry:0,FrameTimeout:null,OnBack:function(){alert('Back Button Clicked')},BAJBFrame:function(){var BAJBOnBack=document.getElementById('BAJBOnBack');if(backdetect.FrameLoaded>1){if(backdetect.FrameLoaded==2){backdetect.OnBack();history.back()}}backdetect.FrameLoaded++;if(backdetect.FrameLoaded==1){if(backdetect.Browser.IE){backdetect.SetupFrames()}else{backdetect.FrameTimeout=setTimeout("backdetect.SetupFrames();",700)}}},SetupFrames:function(){clearTimeout(backdetect.FrameTimeout);var BBiFrame=document.getElementById('BAJBOnBack');var checkVar=BBiFrame.src.substr(-11,11);if(backdetect.FrameLoaded==1&&checkVar!="HistoryLoad"){BBiFrame.src="blank.html?HistoryLoad"}else{if(backdetect.FrameTry<2&&checkVar!="HistoryLoad"){backdetect.FrameTry++;backdetect.FrameTimeout=setTimeout("backdetect.SetupFrames();",700)}}},SafariHash:'false',Safari:function(){if(backdetect.SafariHash=='false'){if(window.location.hash=='#b'){backdetect.SafariHash='true'}else{window.location.hash='#b'}setTimeout("backdetect.Safari();",100)}else if(backdetect.SafariHash=='true'){if(window.location.hash==''){backdetect.SafariHash='back';backdetect.OnBack();history.back()}else{setTimeout("backdetect.Safari();",100)}}},Initialise:function(){if(backdetect.Browser.Safari){setTimeout("backdetect.Safari();",600)}else{document.write('<iframe src="blank.html" style="display:none;" id="BAJBOnBack" onunload="alert(\'de\')" onload="backdetect.BAJBFrame();"></iframe>')}}};backdetect.Initialise();